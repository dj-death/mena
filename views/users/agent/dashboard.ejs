<%- include('../include/dashboard-headcss') %>

<body>
  <%- include('dashboard-menu') %>

  <div class="content ht-100v pd-0">
    <div class="content-header d-sm-none">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb breadcrumb-style1 mg-b-0">
                              <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
          <li class="breadcrumb-item active" aria-current="page">Agent Area</li>
        </ol>
      </nav>
      <!--
        <div class="content-search">
          <i data-feather="search"></i>
          <input type="search" class="form-control" placeholder="Search...">
        </div>
        <nav class="nav">
          <a href="" class="nav-link"><i data-feather="help-circle"></i></a>
          <a href="" class="nav-link"><i data-feather="grid"></i></a>
          <a href="" class="nav-link"><i data-feather="align-left"></i></a>
        </nav>
      -->
    </div><!-- content-header -->

    <!-- mg-t-0 -->
    <div class="content-body">
      <!-- pd-x-0 pd-lg-x-10 pd-xl-x-0 -->
      <div class="container pd-x-0">

        <div class="row row-xs mg-b-50 pd-sm-x-100">

          <!-- Requests -->
          <div class="col-lg-8 col-xl-12">
            <div class="card">
              <div class="card-header d-sm-flex align-items-start justify-content-between bg-info pd-y-5">
                <h6 class="lh-5 mg-b-0  tx-white tx-semibold">New Requests</h6>
              </div><!-- card-header -->

              <div class="card card-body pd-0">
                <ul class="list-group list-group-flush tx-13">
                  <% requests.forEach(function(req) { %>
                  <li class="list-group-item d-flex pd-sm-y-5">
                    
                    <div class="avatar avatar-online mg-r-15">
                      <img src="https://via.placeholder.com/500" class="rounded-circle" alt="">
                      <span class="avatar-initial rounded-circle bg-pink"><%= req.client.name[0] %></span>
                    </div>

                    <div class="pd-sm-l-10">
                      <p class="tx-medium mg-b-2"><%= req.client.name %></p>
                      <small class="tx-12 tx-color-03 mg-b-0"><%= req.message %></small>
                      <p class="tx-medium mg-b-2"><b><%= req.project.title %> : </b> <%= req.project.description %></p>
                      <span class="badge badge-info">$ <%= req.price %></span>
                      <span class="badge badge-dark"><%= req.duration %> Days</span>
                    </div>
                    <div class="mg-l-auto">
                      <button class="btn btn-success btn-xs d-flex d-sm-inline mg-b-5 mg-sm-b-0">Accept</button>
                      <button class="btn btn-danger btn-xs d-flex d-sm-inline">Reject</button>
                    </div>

                  </li>

                  <% }); %>

                </ul>
              </div>
            </div>
          </div> <!-- End Requests -->

        </div> <!-- end row 1 -->


        <div class="d-sm-flex align-items-center justify-content-end mg-b-20 mg-lg-b-25 mg-xl-b-30 bd-t pd-t-15">
          <a href="" class="tx-13 link-03">Mar 01 - Mar 20, 2019 <i class="icon ion-ios-arrow-down"></i></a>
        </div>

        <!-- Rows 2 Stats -->
        <div class="row row-xs">

          <!-- Calls Per Date Period -->
          <div class="col-lg-8 col-xl-9">
            <div class="card">
              <div
                class="card-header d-flex flex-column flex-sm-row align-items-sm-start justify-content-sm-between bg-gray-100 pd-y-8">
                <div class="mg-t-5 mg-sm-b-0">
                  <h6 class="">Calls Per Date Period</h6>
                </div>
                <div class="btn-group mg-t-2 mg-sm-t-0">
                  <button class="btn btn-xs btn-white btn-uppercase">Day</button>
                  <button class="btn btn-xs btn-white btn-uppercase">Week</button>
                  <button class="btn btn-xs btn-white btn-uppercase active">Month</button>
                </div><!-- btn-group -->
              </div>

              <div class="card-body">
                <div class="row align-items-sm-end">

                  <div class="col">
                    <div class="chart-fifteen">
                      <div id="flotChart1" class="flot-chart" style="padding: 0px; position: relative;"><canvas
                          class="flot-base" width="732" height="200"
                          style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 732.656px; height: 200px;"></canvas>
                        <div class="flot-text"
                          style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px; font-size: smaller; color: rgb(84, 84, 84);">
                          <div class="flot-x-axis flot-x1-axis xAxis x1Axis"
                            style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px;">
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; max-width: 91px; top: 188px; left: 6px; text-align: center;">
                              Mar
                              10</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; max-width: 91px; top: 188px; left: 101px; text-align: center;">
                              Mar 11</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; max-width: 91px; top: 188px; left: 195px; text-align: center;">
                              Mar 12</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; max-width: 91px; top: 188px; left: 289px; text-align: center;">
                              Mar 13</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; max-width: 91px; top: 188px; left: 383px; text-align: center;">
                              Mar 14</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; max-width: 91px; top: 188px; left: 477px; text-align: center;">
                              Mar 15</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; max-width: 91px; top: 188px; left: 571px; text-align: center;">
                              Mar 16</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; max-width: 91px; top: 188px; left: 666px; text-align: center;">
                              Mar 17</div>
                          </div>
                          <div class="flot-y-axis flot-y1-axis yAxis y1Axis"
                            style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px;">
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; top: 172px; left: 5px; text-align: right;">0</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; top: 143px; left: 0px; text-align: right;">15</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; top: 115px; left: 0px; text-align: right;">30</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; top: 87px; left: 0px; text-align: right;">45</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; top: 58px; left: 0px; text-align: right;">60</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; top: 30px; left: 0px; text-align: right;">75</div>
                            <div class="flot-tick-label tickLabel"
                              style="position: absolute; top: 2px; left: 0px; text-align: right;">90</div>
                          </div>
                        </div><canvas class="flot-overlay" width="732" height="200"
                          style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 732.656px; height: 200px;"></canvas>
                      </div>
                    </div>
                  </div>

                </div>

              </div><!-- card-body -->
            </div>

          </div><!-- end Calls Per Date Period -->

          <!-- Calls By Project -->
          <div class="col-md-6 col-lg-4 col-xl-3">
            <div class="card">
              <div class="card-header bg-gray-100 bd-b">
                <h6 class="mg-b-0">Calls By Project</h6>
              </div><!-- card-header -->

              <div class="card-body pd-1">
                <div class="chart-seventeen">
                  <div class="chartjs-size-monitor">
                    <div class="chartjs-size-monitor-expand">
                      <div class=""></div>
                    </div>
                    <div class="chartjs-size-monitor-shrink">
                      <div class=""></div>
                    </div>
                  </div><canvas id="chartBar2" style="display: block; width: 395px; height: 260px;" width="395"
                    height="260" class="chartjs-render-monitor"></canvas>
                </div>
              </div><!-- card-body -->
            </div><!-- card -->
          </div><!-- end Calls By Project -->

        </div>

        <!-- Row 3 -->
        <div class="row row-xs">
          <!-- Projects List -->
          <div class="col-lg-8 col-xl-12 mg-t-25">
            <div class="card">
              <div class="card-header d-sm-flex align-items-start justify-content-between bg-gray-100">
                <h6 class="lh-5 mg-b-0 tx-semibold">Projects</h6>
              </div><!-- card-header -->
              <div class="card-body pd-y-15 pd-x-10">
                <div class="table-responsive">
                  <table class="table table-borderless table-sm tx-13 tx-nowrap mg-b-0">
                    <thead>
                      <tr class="tx-10 tx-spacing-1 tx-color-03 tx-uppercase">
                        <th>Project</th>
                        <th class="text-right">Calls</th>
                        <th class="text-right">Sales / Leads</th>
                        <th class="text-right">Hours Worked</th>
                        <th class="text-right">Earnings</th>
                        <th class="text-right">Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% projects.forEach(function (proj) { %>
                      <tr>
                        <td class="tx-medium"><a href="/agent/project/<%= proj.id %>"
                            class="link-01"><%= proj.title %></a></td>
                        <td class="text-right"><%= proj.callsCount %></td>
                        <td class="text-right"><%= proj.sales %></td>
                        <td class="text-right"><%= proj.hoursWorked %></td>
                        <td class="text-right"><%= proj.earnings %></td>
                        <td class="text-right <% if (proj.status == 'Live') { %>  <%= 'tx-success' %> <% } %>">
                          <%= proj.status %></td>
                      </tr>
                      <% }); %>

                    </tbody>
                  </table>
                </div><!-- table-responsive -->
              </div><!-- card-body -->
            </div><!-- card -->
          </div><!-- end Projects List -->
        </div> <!-- end Rows 3 -->

      </div><!-- container -->
    </div><!-- content-body -->
  </div><!-- content -->



  <%- include('../include/dashboard-footer-scripts') %>

  <script>
    $(function () {
      'use strict'

      $.plot('#flotChart1', [{
        data: df1,
        color: '#69b2f8'
      }, /*{
        data: df3,
        color: '#0168fa',
        lines: {
          show: true,
          lineWidth: 1.5
        },
        bars: { show: false }
      }*/], {
        series: {
          shadowSize: 0,
          bars: {
            show: true,
            lineWidth: 0,
            barWidth: .5,
            fill: 1
          }
        },
        grid: {
          color: '#c0ccda',
          borderWidth: 0,
          labelMargin: 10
        },
        yaxis: {
          show: true,
          max: 90,
          tickSize: 15
        },
        xaxis: {
          color: 'transparent',
          show: true,
          max: 37,
          ticks: [[0, 'Mar 10'], [5, 'Mar 15'], [10, 'Mar 20'], [15, 'Mar 25'], [20, 'Avr 1'], [25, 'Avr 05'], [30, 'Avr 10'], [35, 'Avr 15']]
        }
      });

      // Donut chart
      $('.peity-donut').peity('donut');


      $.plot('#flotChart2', [{
        data: df3,
        color: '#0168fa',
        curvedLines: { apply: true }
      }], {
        series: {
          shadowSize: 0,
          lines: {
            show: true,
            lineWidth: 1.5,
            fill: .05
          }
        },
        grid: {
          borderWidth: 0,
          labelMargin: 0
        },
        yaxis: {
          show: false,
          max: 55
        },
        xaxis: {
          show: true,
          color: 'rgba(131,146,165,.08)',
          min: 48,
          max: 102,
          tickSize: 5
        }
      });
    })

    // Horizontal bar chart
    var ctx2 = document.getElementById('chartBar2').getContext('2d');
    new Chart(ctx2, {
      type: 'horizontalBar',
      data: {
        labels: ['Project 1', 'Project 2', 'Project 3'],
        datasets: [{
          data: [90, 60, 50, 95, 50, 60],
          backgroundColor: ['#65e0e0', '#69b2f8', '#6fd39b', '#f77eb9', '#fdb16d', '#c693f9']
        }]
      },
      options: {
        maintainAspectRatio: false,
        responsive: true,
        legend: {
          display: false,
          labels: {
            display: false
          }
        },
        layout: {
          padding: {
            left: 5
          }
        },
        scales: {
          yAxes: [{
            gridLines: {
              display: false
            },
            barPercentage: 0.5,
            ticks: {
              beginAtZero: true,
              fontSize: 13,
              fontColor: '#182b49',
              fontFamily: 'IBM Plex Sans'
            }
          }],
          xAxes: [{
            gridLines: {
              color: '#e5e9f2'
            },
            ticks: {
              beginAtZero: true,
              fontSize: 10,
              fontColor: '#182b49',
              max: 100
            }
          }]
        }
      }
    });
  </script>

</body>

</html>